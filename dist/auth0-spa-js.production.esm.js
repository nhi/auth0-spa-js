/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)};function i(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(i=Object.getOwnPropertySymbols(t);c<i.length;c++)e.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(t,i[c])&&(n[i[c]]=t[i[c]])}return n}function c(t,e,n,i){return new(n||(n=Promise))((function(c,o){function r(t){try{u(i.next(t))}catch(t){o(t)}}function l(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}u((i=i.apply(t,e||[])).next())}))}function o(t,e){var n,i,c,o,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(c=2&o[0]?i.return:o[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,o[1])).done)return c;switch(i=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(c=r.trys,(c=c.length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){r.label=o[1];break}if(6===o[0]&&r.label<c[1]){r.label=c[1],c=o;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(o);break}c[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u(t,e){return t(e={exports:{}},e.exports),e.exports}var s=function(t){return t&&t.Math==Math&&t},a=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof r&&r)||Function("return this")(),I=function(t){try{return!!t()}catch(t){return!0}},g=!I((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),d={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,y={f:b&&!d.call({1:2},1)?function(t){var e=b(this,t);return!!e&&e.enumerable}:d},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,m=function(t){return h.call(t).slice(8,-1)},X="".split,f=I((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==m(t)?X.call(t,""):Object(t)}:Object,C=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},B=function(t){return f(C(t))},V=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Z=function(t,e){if(!V(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!V(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!V(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!V(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},F={}.hasOwnProperty,G=function(t,e){return F.call(t,e)},x=a.document,J=V(x)&&V(x.createElement),U=function(t){return J?x.createElement(t):{}},H=!g&&!I((function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a})),v=Object.getOwnPropertyDescriptor,A={f:g?v:function(t,e){if(t=B(t),e=Z(e,!0),H)try{return v(t,e)}catch(t){}if(G(t,e))return p(!y.f.call(t,e),t[e])}},S=function(t){if(!V(t))throw TypeError(String(t)+" is not an object");return t},Q=Object.defineProperty,R={f:g?Q:function(t,e,n){if(S(t),e=Z(e,!0),S(n),H)try{return Q(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},w=g?function(t,e,n){return R.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},W=function(t,e){try{w(a,t,e)}catch(n){a[t]=e}return e},L=a["__core-js_shared__"]||W("__core-js_shared__",{}),k=Function.toString;"function"!=typeof L.inspectSource&&(L.inspectSource=function(t){return k.call(t)});var N,Y,T,E=L.inspectSource,K=a.WeakMap,z="function"==typeof K&&/native code/.test(E(K)),D=u((function(t){(t.exports=function(t,e){return L[t]||(L[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),O=0,P=Math.random(),j=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++O+P).toString(36)},M=D("keys"),_=function(t){return M[t]||(M[t]=j(t))},q={},$=a.WeakMap;if(z){var tt=new $,et=tt.get,nt=tt.has,it=tt.set;N=function(t,e){return it.call(tt,t,e),e},Y=function(t){return et.call(tt,t)||{}},T=function(t){return nt.call(tt,t)}}else{var ct=_("state");q[ct]=!0,N=function(t,e){return w(t,ct,e),e},Y=function(t){return G(t,ct)?t[ct]:{}},T=function(t){return G(t,ct)}}var ot,rt={set:N,get:Y,has:T,enforce:function(t){return T(t)?Y(t):N(t,{})},getterFor:function(t){return function(e){var n;if(!V(e)||(n=Y(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},lt=u((function(t){var e=rt.get,n=rt.enforce,i=String(String).split("String");(t.exports=function(t,e,c,o){var r=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof c&&("string"!=typeof e||G(c,"name")||w(c,"name",e),n(c).source=i.join("string"==typeof e?e:"")),t!==a?(r?!u&&t[e]&&(l=!0):delete t[e],l?t[e]=c:w(t,e,c)):l?t[e]=c:W(e,c)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||E(this)}))})),ut=a,st=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?st(ut[t])||st(a[t]):ut[t]&&ut[t][e]||a[t]&&a[t][e]},It=Math.ceil,gt=Math.floor,dt=function(t){return isNaN(t=+t)?0:(t>0?gt:It)(t)},bt=Math.min,yt=function(t){return t>0?bt(dt(t),9007199254740991):0},pt=Math.max,ht=Math.min,mt=function(t){return function(e,n,i){var c,o=B(e),r=yt(o.length),l=function(t,e){var n=dt(t);return n<0?pt(n+e,0):ht(n,e)}(i,r);if(t&&n!=n){for(;r>l;)if((c=o[l++])!=c)return!0}else for(;r>l;l++)if((t||l in o)&&o[l]===n)return t||l||0;return!t&&-1}},Xt={includes:mt(!0),indexOf:mt(!1)},ft=Xt.indexOf,Ct=function(t,e){var n,i=B(t),c=0,o=[];for(n in i)!G(q,n)&&G(i,n)&&o.push(n);for(;e.length>c;)G(i,n=e[c++])&&(~ft(o,n)||o.push(n));return o},Bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vt=Bt.concat("length","prototype"),Zt={f:Object.getOwnPropertyNames||function(t){return Ct(t,Vt)}},Ft={f:Object.getOwnPropertySymbols},Gt=at("Reflect","ownKeys")||function(t){var e=Zt.f(S(t)),n=Ft.f;return n?e.concat(n(t)):e},xt=function(t,e){for(var n=Gt(e),i=R.f,c=A.f,o=0;o<n.length;o++){var r=n[o];G(t,r)||i(t,r,c(e,r))}},Jt=/#|\.prototype\./,Ut=function(t,e){var n=vt[Ht(t)];return n==St||n!=At&&("function"==typeof e?I(e):!!e)},Ht=Ut.normalize=function(t){return String(t).replace(Jt,".").toLowerCase()},vt=Ut.data={},At=Ut.NATIVE="N",St=Ut.POLYFILL="P",Qt=Ut,Rt=A.f,wt=function(t,e){var n,i,c,o,r,l=t.target,u=t.global,s=t.stat;if(n=u?a:s?a[l]||W(l,{}):(a[l]||{}).prototype)for(i in e){if(o=e[i],c=t.noTargetGet?(r=Rt(n,i))&&r.value:n[i],!Qt(u?i:l+(s?".":"#")+i,t.forced)&&void 0!==c){if(typeof o==typeof c)continue;xt(o,c)}(t.sham||c&&c.sham)&&w(o,"sham",!0),lt(n,i,o,t)}},Wt=!!Object.getOwnPropertySymbols&&!I((function(){return!String(Symbol())})),Lt=Wt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,kt=D("wks"),Nt=a.Symbol,Yt=Lt?Nt:Nt&&Nt.withoutSetter||j,Tt=function(t){return G(kt,t)||(Wt&&G(Nt,t)?kt[t]=Nt[t]:kt[t]=Yt("Symbol."+t)),kt[t]},Et=Tt("match"),Kt=function(t){if(function(t){var e;return V(t)&&(void 0!==(e=t[Et])?!!e:"RegExp"==m(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},zt=Tt("match"),Dt=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[zt]=!1,"/./"[t](e)}catch(t){}}return!1},Ot=A.f,Pt="".startsWith,jt=Math.min,Mt=Dt("startsWith"),_t=!(Mt||(ot=Ot(String.prototype,"startsWith"),!ot||ot.writable));wt({target:"String",proto:!0,forced:!_t&&!Mt},{startsWith:function(t){var e=String(C(this));Kt(t);var n=yt(jt(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return Pt?Pt.call(e,i,n):e.slice(n,n+i.length)===i}});var qt,$t,te,ee=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ne=function(t,e,n){if(ee(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,c){return t.call(e,n,i,c)}}return function(){return t.apply(e,arguments)}},ie=Function.call,ce=function(t,e,n){return ne(ie,a[t].prototype[e],n)},oe=(ce("String","startsWith"),function(t){return function(e,n){var i,c,o=String(C(e)),r=dt(n),l=o.length;return r<0||r>=l?t?"":void 0:(i=o.charCodeAt(r))<55296||i>56319||r+1===l||(c=o.charCodeAt(r+1))<56320||c>57343?t?o.charAt(r):i:t?o.slice(r,r+2):c-56320+(i-55296<<10)+65536}}),re={codeAt:oe(!1),charAt:oe(!0)},le=function(t){return Object(C(t))},ue=!I((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),se=_("IE_PROTO"),ae=Object.prototype,Ie=ue?Object.getPrototypeOf:function(t){return t=le(t),G(t,se)?t[se]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ae:null},ge=Tt("iterator"),de=!1;[].keys&&("next"in(te=[].keys())?($t=Ie(Ie(te)))!==Object.prototype&&(qt=$t):de=!0),null==qt&&(qt={}),G(qt,ge)||w(qt,ge,(function(){return this}));var be,ye={IteratorPrototype:qt,BUGGY_SAFARI_ITERATORS:de},pe=Object.keys||function(t){return Ct(t,Bt)},he=g?Object.defineProperties:function(t,e){S(t);for(var n,i=pe(e),c=i.length,o=0;c>o;)R.f(t,n=i[o++],e[n]);return t},me=at("document","documentElement"),Xe=_("IE_PROTO"),fe=function(){},Ce=function(t){return"<script>"+t+"<\/script>"},Be=function(){try{be=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Be=be?function(t){t.write(Ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(be):((e=U("iframe")).style.display="none",me.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ce("document.F=Object")),t.close(),t.F);for(var n=Bt.length;n--;)delete Be.prototype[Bt[n]];return Be()};q[Xe]=!0;var Ve=Object.create||function(t,e){var n;return null!==t?(fe.prototype=S(t),n=new fe,fe.prototype=null,n[Xe]=t):n=Be(),void 0===e?n:he(n,e)},Ze=R.f,Fe=Tt("toStringTag"),Ge=function(t,e,n){t&&!G(t=n?t:t.prototype,Fe)&&Ze(t,Fe,{configurable:!0,value:e})},xe={},Je=ye.IteratorPrototype,Ue=function(){return this},He=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return S(n),function(t){if(!V(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),ve=ye.IteratorPrototype,Ae=ye.BUGGY_SAFARI_ITERATORS,Se=Tt("iterator"),Qe=function(){return this},Re=function(t,e,n,i,c,o,r){!function(t,e,n){var i=e+" Iterator";t.prototype=Ve(Je,{next:p(1,n)}),Ge(t,i,!1),xe[i]=Ue}(n,e,i);var l,u,s,a=function(t){if(t===c&&y)return y;if(!Ae&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},I=e+" Iterator",g=!1,d=t.prototype,b=d[Se]||d["@@iterator"]||c&&d[c],y=!Ae&&b||a(c),h="Array"==e&&d.entries||b;if(h&&(l=Ie(h.call(new t)),ve!==Object.prototype&&l.next&&(Ie(l)!==ve&&(He?He(l,ve):"function"!=typeof l[Se]&&w(l,Se,Qe)),Ge(l,I,!0))),"values"==c&&b&&"values"!==b.name&&(g=!0,y=function(){return b.call(this)}),d[Se]!==y&&w(d,Se,y),xe[e]=y,c)if(u={values:a("values"),keys:o?y:a("keys"),entries:a("entries")},r)for(s in u)(Ae||g||!(s in d))&&lt(d,s,u[s]);else wt({target:e,proto:!0,forced:Ae||g},u);return u},we=re.charAt,We=rt.set,Le=rt.getterFor("String Iterator");Re(String,"String",(function(t){We(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Le(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=we(n,i),e.index+=t.length,{value:t,done:!1})}));var ke=function(t,e,n,i){try{return i?e(S(n)[0],n[1]):e(n)}catch(e){var c=t.return;throw void 0!==c&&S(c.call(t)),e}},Ne=Tt("iterator"),Ye=Array.prototype,Te=function(t){return void 0!==t&&(xe.Array===t||Ye[Ne]===t)},Ee=function(t,e,n){var i=Z(e);i in t?R.f(t,i,p(0,n)):t[i]=n},Ke={};Ke[Tt("toStringTag")]="z";var ze="[object z]"===String(Ke),De=Tt("toStringTag"),Oe="Arguments"==m(function(){return arguments}()),Pe=ze?m:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),De))?n:Oe?m(e):"Object"==(i=m(e))&&"function"==typeof e.callee?"Arguments":i},je=Tt("iterator"),Me=function(t){if(null!=t)return t[je]||t["@@iterator"]||xe[Pe(t)]},_e=Tt("iterator"),qe=!1;try{var $e=0,tn={next:function(){return{done:!!$e++}},return:function(){qe=!0}};tn[_e]=function(){return this},Array.from(tn,(function(){throw 2}))}catch(t){}var en=function(t,e){if(!e&&!qe)return!1;var n=!1;try{var i={};i[_e]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n},nn=!en((function(t){Array.from(t)}));wt({target:"Array",stat:!0,forced:nn},{from:function(t){var e,n,i,c,o,r,l=le(t),u="function"==typeof this?this:Array,s=arguments.length,a=s>1?arguments[1]:void 0,I=void 0!==a,g=Me(l),d=0;if(I&&(a=ne(a,s>2?arguments[2]:void 0,2)),null==g||u==Array&&Te(g))for(n=new u(e=yt(l.length));e>d;d++)r=I?a(l[d],d):l[d],Ee(n,d,r);else for(o=(c=g.call(l)).next,n=new u;!(i=o.call(c)).done;d++)r=I?ke(c,a,[i.value,d],!0):i.value,Ee(n,d,r);return n.length=d,n}});ut.Array.from;var cn,on="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,rn=R.f,ln=a.Int8Array,un=ln&&ln.prototype,sn=a.Uint8ClampedArray,an=sn&&sn.prototype,In=ln&&Ie(ln),gn=un&&Ie(un),dn=Object.prototype,bn=dn.isPrototypeOf,yn=Tt("toStringTag"),pn=j("TYPED_ARRAY_TAG"),hn=on&&!!He&&"Opera"!==Pe(a.opera),mn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Xn=function(t){return V(t)&&G(mn,Pe(t))};for(cn in mn)a[cn]||(hn=!1);if((!hn||"function"!=typeof In||In===Function.prototype)&&(In=function(){throw TypeError("Incorrect invocation")},hn))for(cn in mn)a[cn]&&He(a[cn],In);if((!hn||!gn||gn===dn)&&(gn=In.prototype,hn))for(cn in mn)a[cn]&&He(a[cn].prototype,gn);if(hn&&Ie(an)!==gn&&He(an,gn),g&&!G(gn,yn))for(cn in!0,rn(gn,yn,{get:function(){return V(this)?this[pn]:void 0}}),mn)a[cn]&&w(a[cn],pn,cn);var fn=function(t){if(Xn(t))return t;throw TypeError("Target is not a typed array")},Cn=function(t){if(He){if(bn.call(In,t))return t}else for(var e in mn)if(G(mn,cn)){var n=a[e];if(n&&(t===n||bn.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},Bn=function(t,e,n){if(g){if(n)for(var i in mn){var c=a[i];c&&G(c.prototype,t)&&delete c.prototype[t]}gn[t]&&!n||lt(gn,t,n?e:hn&&un[t]||e)}},Vn=Tt("species"),Zn=fn,Fn=Cn,Gn=[].slice;Bn("slice",(function(t,e){for(var n=Gn.call(Zn(this),t,e),i=function(t,e){var n,i=S(t).constructor;return void 0===i||null==(n=S(i)[Vn])?e:ee(n)}(this,this.constructor),c=0,o=n.length,r=new(Fn(i))(o);o>c;)r[c]=n[c++];return r}),I((function(){new Int8Array(1).slice()})));var xn=Tt("unscopables"),Jn=Array.prototype;null==Jn[xn]&&R.f(Jn,xn,{configurable:!0,value:Ve(null)});var Un=function(t){Jn[xn][t]=!0},Hn=Object.defineProperty,vn={},An=function(t){throw t},Sn=Xt.includes,Qn=function(t,e){if(G(vn,t))return vn[t];e||(e={});var n=[][t],i=!!G(e,"ACCESSORS")&&e.ACCESSORS,c=G(e,0)?e[0]:An,o=G(e,1)?e[1]:void 0;return vn[t]=!!n&&!I((function(){if(i&&!g)return!0;var t={length:-1};i?Hn(t,1,{enumerable:!0,get:An}):t[1]=1,n.call(t,c,o)}))}("indexOf",{ACCESSORS:!0,1:0});wt({target:"Array",proto:!0,forced:!Qn},{includes:function(t){return Sn(this,t,arguments.length>1?arguments[1]:void 0)}}),Un("includes");ce("Array","includes");wt({target:"String",proto:!0,forced:!Dt("includes")},{includes:function(t){return!!~String(C(this)).indexOf(Kt(t),arguments.length>1?arguments[1]:void 0)}});ce("String","includes");var Rn=!I((function(){return Object.isExtensible(Object.preventExtensions({}))})),wn=u((function(t){var e=R.f,n=j("meta"),i=0,c=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++i,weakData:{}}})},r=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!V(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!G(t,n)){if(!c(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!G(t,n)){if(!c(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Rn&&r.REQUIRED&&c(t)&&!G(t,n)&&o(t),t}};q[n]=!0})),Wn=(wn.REQUIRED,wn.fastKey,wn.getWeakData,wn.onFreeze,u((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,i,c,o){var r,l,u,s,a,I,g,d=ne(n,i,c?2:1);if(o)r=t;else{if("function"!=typeof(l=Me(t)))throw TypeError("Target is not iterable");if(Te(l)){for(u=0,s=yt(t.length);s>u;u++)if((a=c?d(S(g=t[u])[0],g[1]):d(t[u]))&&a instanceof e)return a;return new e(!1)}r=l.call(t)}for(I=r.next;!(g=I.call(r)).done;)if("object"==typeof(a=ke(r,d,g.value,c))&&a&&a instanceof e)return a;return new e(!1)}).stop=function(t){return new e(!0,t)}}))),Ln=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},kn=function(t,e,n){for(var i in e)lt(t,i,e[i],n);return t},Nn=Tt("species"),Yn=R.f,Tn=wn.fastKey,En=rt.set,Kn=rt.getterFor,zn=(function(t,e,n){var i=-1!==t.indexOf("Map"),c=-1!==t.indexOf("Weak"),o=i?"set":"add",r=a[t],l=r&&r.prototype,u=r,s={},g=function(t){var e=l[t];lt(l,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(c&&!V(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return c&&!V(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(c&&!V(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Qt(t,"function"!=typeof r||!(c||l.forEach&&!I((function(){(new r).entries().next()})))))u=n.getConstructor(e,t,i,o),wn.REQUIRED=!0;else if(Qt(t,!0)){var d=new u,b=d[o](c?{}:-0,1)!=d,y=I((function(){d.has(1)})),p=en((function(t){new r(t)})),h=!c&&I((function(){for(var t=new r,e=5;e--;)t[o](e,e);return!t.has(-0)}));p||((u=e((function(e,n){Ln(e,u,t);var c=function(t,e,n){var i,c;return He&&"function"==typeof(i=e.constructor)&&i!==n&&V(c=i.prototype)&&c!==n.prototype&&He(t,c),t}(new r,e,u);return null!=n&&Wn(n,c[o],c,i),c}))).prototype=l,l.constructor=u),(y||h)&&(g("delete"),g("has"),i&&g("get")),(h||b)&&g(o),c&&l.clear&&delete l.clear}s[t]=u,wt({global:!0,forced:u!=r},s),Ge(u,t),c||n.setStrong(u,t,i)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,i){var c=t((function(t,o){Ln(t,c,e),En(t,{type:e,index:Ve(null),first:void 0,last:void 0,size:0}),g||(t.size=0),null!=o&&Wn(o,t[i],t,n)})),o=Kn(e),r=function(t,e,n){var i,c,r=o(t),u=l(t,e);return u?u.value=n:(r.last=u={index:c=Tn(e,!0),key:e,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=u),i&&(i.next=u),g?r.size++:t.size++,"F"!==c&&(r.index[c]=u)),t},l=function(t,e){var n,i=o(t),c=Tn(e);if("F"!==c)return i.index[c];for(n=i.first;n;n=n.next)if(n.key==e)return n};return kn(c.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,g?t.size=0:this.size=0},delete:function(t){var e=o(this),n=l(this,t);if(n){var i=n.next,c=n.previous;delete e.index[n.index],n.removed=!0,c&&(c.next=i),i&&(i.previous=c),e.first==n&&(e.first=i),e.last==n&&(e.last=c),g?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),i=ne(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),kn(c.prototype,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return r(this,0===t?0:t,e)}}:{add:function(t){return r(this,t=0===t?0:t,t)}}),g&&Yn(c.prototype,"size",{get:function(){return o(this).size}}),c},setStrong:function(t,e,n){var i=e+" Iterator",c=Kn(e),o=Kn(i);Re(t,e,(function(t,e){En(this,{type:i,target:t,state:c(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=at(t),n=R.f;g&&e&&!e[Nn]&&n(e,Nn,{configurable:!0,get:function(){return this}})}(e)}}),ze?{}.toString:function(){return"[object "+Pe(this)+"]"});ze||lt(Object.prototype,"toString",zn,{unsafe:!0});var Dn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},On=rt.set,Pn=rt.getterFor("Array Iterator"),jn=Re(Array,"Array",(function(t,e){On(this,{type:"Array Iterator",target:B(t),index:0,kind:e})}),(function(){var t=Pn(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");xe.Arguments=xe.Array,Un("keys"),Un("values"),Un("entries");var Mn=Tt("iterator"),_n=Tt("toStringTag"),qn=jn.values;for(var $n in Dn){var ti=a[$n],ei=ti&&ti.prototype;if(ei){if(ei[Mn]!==qn)try{w(ei,Mn,qn)}catch(t){ei[Mn]=qn}if(ei[_n]||w(ei,_n,$n),Dn[$n])for(var ni in jn)if(ei[ni]!==jn[ni])try{w(ei,ni,jn[ni])}catch(t){ei[ni]=jn[ni]}}}ut.Set;function ii(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}var ci=setTimeout;function oi(t){return Boolean(t&&void 0!==t.length)}function ri(){}function li(t){if(!(this instanceof li))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],di(t,this)}function ui(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,li._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void ai(e.promise,t)}si(e.promise,i)}else(1===t._state?si:ai)(e.promise,t._value)}))):t._deferreds.push(e)}function si(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof li)return t._state=3,t._value=e,void Ii(t);if("function"==typeof n)return void di((i=n,c=e,function(){i.apply(c,arguments)}),t)}t._state=1,t._value=e,Ii(t)}catch(e){ai(t,e)}var i,c}function ai(t,e){t._state=2,t._value=e,Ii(t)}function Ii(t){2===t._state&&0===t._deferreds.length&&li._immediateFn((function(){t._handled||li._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)ui(t,t._deferreds[e]);t._deferreds=null}function gi(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function di(t,e){var n=!1;try{t((function(t){n||(n=!0,si(e,t))}),(function(t){n||(n=!0,ai(e,t))}))}catch(t){if(n)return;n=!0,ai(e,t)}}li.prototype.catch=function(t){return this.then(null,t)},li.prototype.then=function(t,e){var n=new this.constructor(ri);return ui(this,new gi(t,e,n)),n},li.prototype.finally=ii,li.all=function(t){return new li((function(e,n){if(!oi(t))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var c=i.length;function o(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var l=r.then;if("function"==typeof l)return void l.call(r,(function(e){o(t,e)}),n)}i[t]=r,0==--c&&e(i)}catch(t){n(t)}}for(var r=0;r<i.length;r++)o(r,i[r])}))},li.resolve=function(t){return t&&"object"==typeof t&&t.constructor===li?t:new li((function(e){e(t)}))},li.reject=function(t){return new li((function(e,n){n(t)}))},li.race=function(t){return new li((function(e,n){if(!oi(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,c=t.length;i<c;i++)li.resolve(t[i]).then(e,n)}))},li._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){ci(t,0)},li._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var bi=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in bi?bi.Promise.prototype.finally||(bi.Promise.prototype.finally=ii):bi.Promise=li,function(t){function e(){}function n(t,e){if(t=void 0===t?"utf-8":t,e=void 0===e?{fatal:!1}:e,-1===i.indexOf(t.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var n=t.length,i=0,c=Math.max(32,n+(n>>1)+7),o=new Uint8Array(c>>3<<3);e<n;){var r=t.charCodeAt(e++);if(55296<=r&&56319>=r){if(e<n){var l=t.charCodeAt(e);56320==(64512&l)&&(++e,r=((1023&r)<<10)+(1023&l)+65536)}if(55296<=r&&56319>=r)continue}if(i+4>o.length&&(c+=8,c=(c*=1+e/t.length*2)>>3<<3,(l=new Uint8Array(c)).set(o),o=l),0==(4294967168&r))o[i++]=r;else{if(0==(4294965248&r))o[i++]=r>>6&31|192;else if(0==(4294901760&r))o[i++]=r>>12&15|224,o[i++]=r>>6&63|128;else{if(0!=(4292870144&r))continue;o[i++]=r>>18&7|240,o[i++]=r>>12&63|128,o[i++]=r>>6&63|128}o[i++]=63&r|128}}return o.slice?o.slice(0,i):o.subarray(0,i)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1}),n.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");!((e=t)instanceof Uint8Array)&&e.buffer instanceof ArrayBuffer&&(e=new Uint8Array(t.buffer)),t=0;for(var n=[],i=[];;){var c=t<e.length;if(!c||65536&t){if(i.push(String.fromCharCode.apply(null,n)),!c)return i.join("");n=[],e=e.subarray(t),t=0}if(0===(c=e[t++]))n.push(0);else if(0==(128&c))n.push(c);else if(192==(224&c)){var o=63&e[t++];n.push((31&c)<<6|o)}else if(224==(240&c)){o=63&e[t++];var r=63&e[t++];n.push((31&c)<<12|o<<6|r)}else if(240==(248&c)){65535<(c=(7&c)<<18|(o=63&e[t++])<<12|(r=63&e[t++])<<6|63&e[t++])&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c)}}},t.TextEncoder=e,t.TextDecoder=n}("undefined"!=typeof window?window:r),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var c=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(c){var o=Object.getOwnPropertyDescriptor(c,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}var u=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],i=0,c=n.length;i<c;i++)if(n[i]===e)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(e,t)}))},i=this.listeners[t.type],c=0,o=i.length;c<o;c++)n(i[c]);return!t.defaultPrevented}}}]),e}(),s=function(e){function r(){var e;return t(this,r),(e=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?o(t):e}(this,i(r).call(this))).listeners||u.call(o(e)),Object.defineProperty(o(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(o(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,e),n(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),l(i(r.prototype),"dispatchEvent",this).call(this,t)}}]),r}(u),a=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new s,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(a.prototype[Symbol.toStringTag]="AbortController",s.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=a,t.AbortSignal=s)}("undefined"!=typeof self?self:r)}();var yi=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var i=t.locked.get(e);void 0===i?void 0===n?t.locked.set(e,[]):t.locked.set(e,[n]):void 0!==n&&(i.unshift(n),t.locked.set(e,i))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,i){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var i=n.pop();t.locked.set(e,n),void 0!==i&&setTimeout(i,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));l(yi);var pi=l(u((function(t,e){var n=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(c,o){function r(t){try{u(i.next(t))}catch(t){o(t)}}function l(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?c(t.value):new n((function(e){e(t.value)})).then(r,l)}u((i=i.apply(t,e||[])).next())}))},i=r&&r.__generator||function(t,e){var n,i,c,o,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(c=2&o[0]?i.return:o[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,o[1])).done)return c;switch(i=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(c=r.trys,(c=c.length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){r.label=o[1];break}if(6===o[0]&&r.label<c[1]){r.label=c[1],c=o;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(o);break}c[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(e,"__esModule",{value:!0});function c(t){return new Promise((function(e){return setTimeout(e,t)}))}function o(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",i=0;i<t;i++){n+=e[Math.floor(Math.random()*e.length)]}return n}var l=function(){function t(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+o(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,r){return void 0===r&&(r=5e3),n(this,void 0,void 0,(function(){var n,l,u,s,a,I;return i(this,(function(i){switch(i.label){case 0:n=Date.now()+o(4),l=Date.now()+r,u="browser-tabs-lock-key-"+e,s=window.localStorage,i.label=1;case 1:return Date.now()<l?[4,c(30)]:[3,8];case 2:return i.sent(),null!==s.getItem(u)?[3,5]:(a=this.id+"-"+e+"-"+n,[4,c(Math.floor(25*Math.random()))]);case 3:return i.sent(),s.setItem(u,JSON.stringify({id:this.id,iat:n,timeoutKey:a,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,c(30)];case 4:return i.sent(),null!==(I=s.getItem(u))&&(I=JSON.parse(I)).id===this.id&&I.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(u,n),[2,!0]):[3,7];case 5:return t.lockCorrector(),[4,this.waitForSomethingToChange(l)];case 6:i.sent(),i.label=7;case 7:return n=Date.now()+o(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var c=this;return i(this,(function(o){return setTimeout((function(){return n(c,void 0,void 0,(function(){var n,c;return i(this,(function(i){switch(i.label){case 0:return[4,yi.default().lock(e)];case 1:return i.sent(),this.acquiredIatSet.has(e)?(n=window.localStorage,null===(c=n.getItem(t))?(yi.default().unlock(e),[2]):((c=JSON.parse(c)).timeRefreshed=Date.now(),n.setItem(t,JSON.stringify(c)),yi.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(yi.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var i=!1,c=Date.now(),o=!1;function r(){if(o||(window.removeEventListener("storage",r),t.removeFromWaiting(r),clearTimeout(l),o=!0),!i){i=!0;var e=50-(Date.now()-c);e>0?setTimeout(n,e):n()}}window.addEventListener("storage",r),t.addToWaiting(r);var l=setTimeout(r,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,c,o;return i(this,(function(i){switch(i.label){case 0:return n=window.localStorage,c="browser-tabs-lock-key-"+e,null===(o=n.getItem(c))?[2]:(o=JSON.parse(o)).id!==this.id?[3,2]:[4,yi.default().lock(o.iat)];case 1:i.sent(),this.acquiredIatSet.delete(o.iat),n.removeItem(c),yi.default().unlock(o.iat),t.notifyWaiters(),i.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(){for(var e=Date.now()-5e3,n=window.localStorage,i=Object.keys(n),c=!1,o=0;o<i.length;o++){var r=i[o];if(r.includes("browser-tabs-lock-key")){var l=n.getItem(r);null!==l&&(void 0===(l=JSON.parse(l)).timeRefreshed&&l.timeAcquired<e||void 0!==l.timeRefreshed&&l.timeRefreshed<e)&&(n.removeItem(r),c=!0)}}c&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=l})));var hi={timeoutInSeconds:60},mi={error:"timeout",error_description:"Timeout"},Xi=function(t,e,n){return void 0===n&&(n=60),new Promise((function(i,c){var o=window.document.createElement("iframe");o.setAttribute("width","0"),o.setAttribute("height","0"),o.style.display="none";var r=function(){window.document.body.contains(o)&&window.document.body.removeChild(o)},l=setTimeout((function(){c(mi),r()}),1e3*n),u=function(t){if(t.origin==e&&t.data&&"authorization_response"===t.data.type){var n=t.source;n&&n.close(),t.data.response.error?c(t.data.response):i(t.data.response),clearTimeout(l),window.removeEventListener("message",u,!1),setTimeout(r,2e3)}};window.addEventListener("message",u,!1),window.document.body.appendChild(o),o.setAttribute("src",t)}))},fi=function(t,e){var i,c,o,r=e.popup;if(r?r.location.href=t:(i=t,c=window.screenX+(window.innerWidth-400)/2,o=window.screenY+(window.innerHeight-600)/2,r=window.open(i,"auth0:authorize:popup","left="+c+",top="+o+",width=400,height=600,resizable,scrollbars=yes,status=1")),!r)throw new Error("Could not open popup");return new Promise((function(t,i){var c=setTimeout((function(){i(n(n({},mi),{popup:r}))}),1e3*(e.timeoutInSeconds||60));window.addEventListener("message",(function(e){if(e.data&&"authorization_response"===e.data.type){if(clearTimeout(c),r.close(),e.data.response.error)return i(e.data.response);t(e.data.response)}}))}))},Ci=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(vi().getRandomValues(new Uint8Array(43))).forEach((function(n){return e+=t[n%t.length]})),e},Bi=function(t){return btoa(t)},Vi=function(t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},Zi=function(t){return c(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Ai().digest({name:"SHA-256"},(new TextEncoder).encode(t)),window.msCrypto?[2,new Promise((function(t,n){e.oncomplete=function(e){t(e.target.result)},e.onerror=function(t){n(t.error)},e.onabort=function(){n("The digest operation was aborted")}}))]:[4,e];case 1:return[2,n.sent()]}}))}))},Fi=function(t){return function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t.replace(/_/g,"/").replace(/-/g,"+"))},Gi=function(t){var e=new Uint8Array(t);return function(t){var e={"+":"-","/":"_","=":""};return t.replace(/[\+\/=]/g,(function(t){return e[t]}))}(window.btoa(String.fromCharCode.apply(String,Array.from(e))))},xi=function(t,e,i,r){return c(void 0,void 0,void 0,(function(){var c,l;return o(this,(function(o){switch(o.label){case 0:return r?(delete e.signal,[2,(a=n({url:t,timeout:i},e),I=r,new Promise((function(t,e){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?e(new Error(n.data.error)):t(n.data)},I.postMessage(a,[n.port2])})))]):[3,1];case 1:return[4,(u=t,s=e,s=s||{},new Promise((function(t,e){var n=new XMLHttpRequest,i=[],c=[],o={},r=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(JSON.parse(n.responseText))},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:r,headers:{keys:function(){return i},entries:function(){return c},get:function(t){return o[t.toLowerCase()]},has:function(t){return t.toLowerCase()in o}}}};for(var l in n.open(s.method||"get",u,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){i.push(e=e.toLowerCase()),c.push([e,n]),o[e]=o[e]?o[e]+","+n:n})),t(r())},n.onerror=e,n.withCredentials="include"==s.credentials,s.headers)n.setRequestHeader(l,s.headers[l]);n.send(s.body||null)})))];case 2:return c=o.sent(),l={ok:c.ok},[4,c.json()];case 3:return[2,(l.json=o.sent(),l)]}var u,s,a,I}))}))},Ji=function(t,e,i,c){void 0===c&&(c=1e4);var o=new AbortController,r=o.signal,l=n(n({},e),{signal:r});return Promise.race([xi(t,l,c,i),new Promise((function(t,e){setTimeout((function(){o.abort(),e(new Error("Timeout when executing 'fetch'"))}),c)}))])},Ui=function(t,e,n,r){return c(void 0,void 0,void 0,(function(){var c,l,u,s,a,I,g,d,b,y;return o(this,(function(o){switch(o.label){case 0:u=0,o.label=1;case 1:if(!(u<3))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,Ji(t,n,r,e)];case 3:return l=o.sent(),c=null,[3,6];case 4:return s=o.sent(),c=s,[3,5];case 5:return u++,[3,1];case 6:if(c)throw c;if(a=l.json,I=a.error,g=a.error_description,d=i(a,["error","error_description"]),!l.ok)throw b=g||"HTTP error. Unable to fetch "+t,(y=new Error(b)).error=I||"request_error",y.error_description=b,y;return[2,d]}}))}))},Hi=function(t,e){return c(void 0,void 0,void 0,(function(){var c=t.baseUrl,r=t.timeout,l=t.tokenEndpoint,u=void 0===l?"/oauth/token":l,s=i(t,["baseUrl","timeout","tokenEndpoint"]);return o(this,(function(t){return[2,Ui(""+c+u,r,{method:"POST",body:Vi(n({redirect_uri:window.location.origin},s)),headers:{"Content-type":"application/x-www-form-urlencoded"}},e)]}))}))},vi=function(){return window.crypto||window.msCrypto},Ai=function(){var t=vi();return t.subtle||t.webkitSubtle},Si=function(t){return Array.from(new Set(t))},Qi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Si(t.join(" ").trim().split(/\s+/)).join(" ")},Ri=function(t){return"@@auth0spajs@@::"+t.client_id+"::"+t.audience+"::"+t.scope},wi=function(t){var e=Math.floor(Date.now()/1e3)+t.expires_in;return{body:t,expiresAt:Math.min(e,t.decodedToken.claims.exp)-60}},Wi=function(){function t(){}return t.prototype.save=function(t){var e=Ri(t),n=wi(t);window.localStorage.setItem(e,JSON.stringify(n))},t.prototype.get=function(t){var e=Ri(t),n=this.readJson(e),i=Math.floor(Date.now()/1e3);if(n){if(!(n.expiresAt<i))return n.body;if(n.body.refresh_token){var c=this.stripData(n);return this.writeJson(e,c),c.body}localStorage.removeItem(e)}},t.prototype.clear=function(){for(var t=localStorage.length-1;t>=0;t--)localStorage.key(t).startsWith("@@auth0spajs@@")&&localStorage.removeItem(localStorage.key(t))},t.prototype.readJson=function(t){var e,n=window.localStorage.getItem(t);if(n&&(e=JSON.parse(n)))return e},t.prototype.writeJson=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.prototype.stripData=function(t){return{body:{refresh_token:t.body.refresh_token},expiresAt:t.expiresAt}},t}(),Li=function(){this.enclosedCache=function(){var t={body:{},expiresAt:0};return{save:function(e){var n=Ri(e),i=wi(e);t[n]=i},get:function(e){var n=Ri(e),i=t[n],c=Math.floor(Date.now()/1e3);if(i)return i.expiresAt<c?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},i.body):void delete t[n]:i.body},clear:function(){t={body:{},expiresAt:0}}}}()},ki=u((function(t,e){var n=r&&r.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)};function i(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function c(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return i("Expires",t.expires?t.expires.toUTCString():"")+i("Domain",t.domain)+i("Path",t.path)+i("Secure",t.secure)+i("SameSite",t.sameSite)}(n)}function o(t){for(var e={},n=t?t.split("; "):[],i=/(%[\dA-F]{2})+/gi,c=0;c<n.length;c++){var o=n[c].split("="),r=o.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1));try{e[o[0].replace(i,decodeURIComponent)]=r.replace(i,decodeURIComponent)}catch(t){}}return e}function l(){return o(document.cookie)}function u(t,e,i){document.cookie=c(t,e,n({path:"/"},i))}e.__esModule=!0,e.encode=c,e.parse=o,e.getAll=l,e.get=function(t){return l()[t]},e.set=u,e.remove=function(t,e){u(t,"",n(n({},e),{expires:-1}))}}));l(ki);ki.encode,ki.parse;var Ni=ki.getAll,Yi=ki.get,Ti=ki.set,Ei=ki.remove,Ki=function(t){var e=Yi(t);if(void 0!==e)return JSON.parse(e)},zi=function(t,e,n){Ti(t,JSON.stringify(e),{expires:n.daysUntilExpire})},Di=function(t){Ei(t)},Oi=function(t){return"a0.spajs.txs."+t},Pi=function(){function t(){var t=this;this.transactions={},"undefined"!=typeof window&&Object.keys(Ni()||{}).filter((function(t){return t.startsWith("a0.spajs.txs.")})).forEach((function(e){var n=e.replace("a0.spajs.txs.","");t.transactions[n]=Ki(e)}))}return t.prototype.create=function(t,e){this.transactions[t]=e,zi(Oi(t),e,{daysUntilExpire:1})},t.prototype.get=function(t){return this.transactions[t]},t.prototype.remove=function(t){delete this.transactions[t],Di(Oi(t))},t}(),ji=function(t){return"number"==typeof t},Mi=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],_i=function(t){if(!t.id_token)throw new Error("ID token is required but missing");var e=function(t){var e=t.split("."),n=e[0],i=e[1],c=e[2];if(3!==e.length||!n||!i||!c)throw new Error("ID token could not be decoded");var o=JSON.parse(Fi(i)),r={__raw:t},l={};return Object.keys(o).forEach((function(t){r[t]=o[t],Mi.includes(t)||(l[t]=o[t])})),{encoded:{header:n,payload:i,signature:c},header:JSON.parse(Fi(n)),claims:r,user:l}}(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+t.iss+'", found "'+e.claims.iss+'"');if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error('Signature algorithm of "'+e.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but was not one of "'+e.claims.aud.join(", ")+'"');if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+t.aud+'", found "'+e.claims.azp+'"')}}else if(e.claims.aud!==t.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but found "'+e.claims.aud+'"');if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+t.nonce+'", found "'+e.claims.nonce+'"')}if(t.max_age&&!ji(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!ji(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!ji(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=t.leeway||60,i=new Date,c=new Date(0),o=new Date(0),r=new Date(0);if(r.setUTCSeconds((parseInt(e.claims.auth_time)+t.max_age)/1e3+n),c.setUTCSeconds(e.claims.exp+n),o.setUTCSeconds(e.claims.nbf-n),i>c)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+i+") is after expiration time ("+c+")");if(ji(e.claims.nbf)&&i<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+i+") is before "+o);if(ji(e.claims.auth_time)&&i>r)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+i+") is after last auth at "+r);return e},qi=function(t){function n(e,i,c,o){void 0===o&&(o=null);var r=t.call(this,e,i)||this;return r.state=c,r.appState=o,Object.setPrototypeOf(r,n.prototype),r}return e(n,t),n}(function(t){function n(e,i){var c=t.call(this,i)||this;return c.error=e,c.error_description=i,Object.setPrototypeOf(c,n.prototype),c}return e(n,t),n}(Error));function $i(t,e,n){var i=void 0===e?null:e,c=function(t,e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),c=0,o=n.length;c<o;++c)i[c]=n.charCodeAt(c);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(t,void 0!==n&&n),o=c.indexOf("\n",10)+1,r=c.substring(o)+(i?"//# sourceMappingURL="+i:""),l=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(l)}var tc,ec,nc,ic,cc=(tc="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgpQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkKcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLgoKVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZCkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwKSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SCk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1IKUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsbj0xLHQ9YXJndW1lbnRzLmxlbmd0aDtuPHQ7bisrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1tuXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLG4sdCl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8scyl7ZnVuY3Rpb24gYShlKXt0cnl7dSh0Lm5leHQoZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3UodC50aHJvdyhlKSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiBuP3I6bmV3IG4oKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4oYSxpKX11KCh0PXQuYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gbihlLHIpe3ZhciBuLHQsbyxzLGE9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHM9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIGkocyl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihzKXtpZihuKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2E7KXRyeXtpZihuPTEsdCYmKG89MiZzWzBdP3QucmV0dXJuOnNbMF0/dC50aHJvd3x8KChvPXQucmV0dXJuKSYmby5jYWxsKHQpLDApOnQubmV4dCkmJiEobz1vLmNhbGwodCxzWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2godD0wLG8mJihzPVsyJnNbMF0sby52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gYS5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTphLmxhYmVsKyssdD1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPWEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1hLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1zWzBdJiYyIT09c1swXSkpe2E9MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFvfHxzWzFdPm9bMF0mJnNbMV08b1szXSkpe2EubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmYS5sYWJlbDxvWzFdKXthLmxhYmVsPW9bMV0sbz1zO2JyZWFrfWlmKG8mJmEubGFiZWw8b1syXSl7YS5sYWJlbD1vWzJdLGEub3BzLnB1c2gocyk7YnJlYWt9b1syXSYmYS5vcHMucG9wKCksYS50cnlzLnBvcCgpO2NvbnRpbnVlfXM9ci5jYWxsKGUsYSl9Y2F0Y2goZSl7cz1bNixlXSx0PTB9ZmluYWxseXtuPW89MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsaV0pfX19dmFyIHQ7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKG8pe3ZhciBzLGEsaSx1LGM7cmV0dXJuIHIodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIsbCxmLHAsaCxiLHk7cmV0dXJuIG4odGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpzPW8uZGF0YSxhPXMudXJsLGk9cy50aW1lb3V0LHU9ZnVuY3Rpb24oZSxyKXt2YXIgbj17fTtmb3IodmFyIHQgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSYmci5pbmRleE9mKHQpPDAmJihuW3RdPWVbdF0pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2Zvcih0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzx0Lmxlbmd0aDtvKyspci5pbmRleE9mKHRbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHRbb10pJiYoblt0W29dXT1lW3Rbb11dKX1yZXR1cm4gbn0ocyxbInVybCIsInRpbWVvdXQiXSksYz1vLnBvcnRzWzBdLG4ubGFiZWw9MTtjYXNlIDE6aWYobi50cnlzLnB1c2goWzEsNywsOF0pLCEobD1mdW5jdGlvbihlKXtlLmluZGV4T2YoIiMiKT4tMSYmKGU9ZS5zdWJzdHIoMCxlLmluZGV4T2YoIiMiKSkpO3ZhciByPWUuc3BsaXQoIiYiKSxuPXt9O3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPWUuc3BsaXQoIj0iKSx0PXJbMF0sbz1yWzFdO25bdF09ZGVjb2RlVVJJQ29tcG9uZW50KG8pfSkpLG4uZXhwaXJlc19pbiYmKG4uZXhwaXJlc19pbj1wYXJzZUludChuLmV4cGlyZXNfaW4pKSxufSh1LmJvZHkpKS5yZWZyZXNoX3Rva2VuJiYicmVmcmVzaF90b2tlbiI9PT1sLmdyYW50X3R5cGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcigiVGhlIHdlYiB3b3JrZXIgaXMgbWlzc2luZyB0aGUgcmVmcmVzaCB0b2tlbiIpO3UuYm9keT0odj1lKGUoe30sbCkse3JlZnJlc2hfdG9rZW46dH0pLE9iamVjdC5rZXlzKHYpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PXZbZV19KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodltlXSl9KSkuam9pbigiJiIpKX1mPW5ldyBBYm9ydENvbnRyb2xsZXIscD1mLnNpZ25hbCxoPXZvaWQgMCxuLmxhYmVsPTI7Y2FzZSAyOnJldHVybiBuLnRyeXMucHVzaChbMiw0LCw1XSksWzQsUHJvbWlzZS5yYWNlKFsoZD1pLG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtyZXR1cm4gc2V0VGltZW91dChlLGQpfSkpKSxmZXRjaChhLGUoZSh7fSx1KSx7c2lnbmFsOnB9KSldKV07Y2FzZSAzOnJldHVybiBoPW4uc2VudCgpLFszLDVdO2Nhc2UgNDpyZXR1cm4gYj1uLnNlbnQoKSxjLnBvc3RNZXNzYWdlKHtlcnJvcjpiLm1lc3NhZ2V9KSxbMl07Y2FzZSA1OnJldHVybiBoP1s0LGguanNvbigpXTooZi5hYm9ydCgpLFsyXSk7Y2FzZSA2OnJldHVybihyPW4uc2VudCgpKS5yZWZyZXNoX3Rva2VuPyh0PXIucmVmcmVzaF90b2tlbixkZWxldGUgci5yZWZyZXNoX3Rva2VuKTp0PW51bGwsYy5wb3N0TWVzc2FnZSh7b2s6aC5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIHk9bi5zZW50KCksYy5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246eS5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIGQsdn0pKX0pKX0pKTsKCg==",ec="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW4ud29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy9jb25zdGFudHMudHMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy90b2tlbi53b3JrZXIudHMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jcmVhdGVCaW5kaW5nKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHByaXZhdGVNYXAsIHZhbHVlKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZU1hcC5zZXQocmVjZWl2ZXIsIHZhbHVlKTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cENvbmZpZ09wdGlvbnMgfSBmcm9tICcuL2dsb2JhbCc7XHJcblxyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVVUSE9SSVpFX1RJTUVPVVRfSU5fU0VDT05EUyA9IDYwO1xyXG5cclxuLyoqXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1BPUFVQX0NPTkZJR19PUFRJT05TOiBQb3B1cENvbmZpZ09wdGlvbnMgPSB7XHJcbiAgdGltZW91dEluU2Vjb25kczogREVGQVVMVF9BVVRIT1JJWkVfVElNRU9VVF9JTl9TRUNPTkRTXHJcbn07XHJcblxyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0lMRU5UX1RPS0VOX1JFVFJZX0NPVU5UID0gMztcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQ0xFQU5VUF9JRlJBTUVfVElNRU9VVF9JTl9TRUNPTkRTID0gMjtcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9GRVRDSF9USU1FT1VUX01TID0gMTAwMDA7XHJcblxyXG5leHBvcnQgY29uc3QgQ0FDSEVfTE9DQVRJT05fTUVNT1JZID0gJ21lbW9yeSc7XHJcbmV4cG9ydCBjb25zdCBDQUNIRV9MT0NBVElPTl9MT0NBTF9TVE9SQUdFID0gJ2xvY2Fsc3RvcmFnZSc7XHJcbmV4cG9ydCBjb25zdCBNSVNTSU5HX1JFRlJFU0hfVE9LRU5fRVJST1JfTUVTU0FHRSA9XHJcbiAgJ1RoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4nO1xyXG5cclxuLyoqXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NDT1BFID0gJ29wZW5pZCBwcm9maWxlIGVtYWlsJztcclxuIiwiaW1wb3J0IHsgTUlTU0lOR19SRUZSRVNIX1RPS0VOX0VSUk9SX01FU1NBR0UgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlSZXN1bHQsIGNyZWF0ZVF1ZXJ5UGFyYW1zIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxubGV0IHJlZnJlc2hUb2tlbjtcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5jb25zdCB3YWl0OiBhbnkgPSB0aW1lID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lKSk7XHJcblxyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxuY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBhc3luYyAoe1xyXG4gIGRhdGE6IHsgdXJsLCB0aW1lb3V0LCAuLi5vcHRzIH0sXHJcbiAgcG9ydHM6IFtwb3J0XVxyXG59KSA9PiB7XHJcbiAgbGV0IGpzb247XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBwYXJzZVF1ZXJ5UmVzdWx0KG9wdHMuYm9keSk7XHJcbiAgICBpZiAoIWJvZHkucmVmcmVzaF90b2tlbiAmJiBib2R5LmdyYW50X3R5cGUgPT09ICdyZWZyZXNoX3Rva2VuJykge1xyXG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihNSVNTSU5HX1JFRlJFU0hfVE9LRU5fRVJST1JfTUVTU0FHRSk7XHJcbiAgICAgIH1cclxuICAgICAgb3B0cy5ib2R5ID0gY3JlYXRlUXVlcnlQYXJhbXMoeyAuLi5ib2R5LCByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW4gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgY29uc3QgeyBzaWduYWwgfSA9IGFib3J0Q29udHJvbGxlcjtcclxuXHJcbiAgICBsZXQgcmVzcG9uc2U7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgd2FpdCh0aW1lb3V0KSxcclxuICAgICAgICBmZXRjaCh1cmwsIHsgLi4ub3B0cywgc2lnbmFsIH0pXHJcbiAgICAgIF0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gZmV0Y2ggZXJyb3IsIHJlamVjdCBgc2VuZE1lc3NhZ2VgIHVzaW5nIGBlcnJvcmAga2V5IHNvIHRoYXQgd2UgcmV0cnkuXHJcbiAgICAgIHBvcnQucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZSkge1xyXG4gICAgICAvLyBJZiB0aGUgcmVxdWVzdCB0aW1lcyBvdXQsIGFib3J0IGl0IGFuZCBsZXQgYGZldGNoV2l0aFRpbWVvdXRgIHJhaXNlIHRoZSBlcnJvci5cclxuICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGlmIChqc29uLnJlZnJlc2hfdG9rZW4pIHtcclxuICAgICAgcmVmcmVzaFRva2VuID0ganNvbi5yZWZyZXNoX3Rva2VuO1xyXG4gICAgICBkZWxldGUganNvbi5yZWZyZXNoX3Rva2VuO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwb3J0LnBvc3RNZXNzYWdlKHtcclxuICAgICAgb2s6IHJlc3BvbnNlLm9rLFxyXG4gICAgICBqc29uXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcG9ydC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIG9rOiBmYWxzZSxcclxuICAgICAganNvbjoge1xyXG4gICAgICAgIGVycm9yX2Rlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIERvbid0IHJ1biBgYWRkRXZlbnRMaXN0ZW5lcmAgaW4gb3VyIHRlc3RzICh0aGlzIGlzIHJlcGxhY2VkIGluIHJvbGx1cClcclxuLyogaXN0YW5idWwgaWdub3JlIGVsc2UgICovXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgbW9kdWxlLmV4cG9ydHMgPSB7IG1lc3NhZ2VIYW5kbGVyIH07XHJcbn0gZWxzZSB7XHJcbiAgLy8gQHRzLWlnbm9yZVxyXG4gIGFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlSGFuZGxlcik7XHJcbn1cclxuIiwiaW1wb3J0IGZldGNoIGZyb20gJ3VuZmV0Y2gnO1xyXG5cclxuaW1wb3J0IHtcclxuICBBdXRoZW50aWNhdGlvblJlc3VsdCxcclxuICBQb3B1cENvbmZpZ09wdGlvbnMsXHJcbiAgVG9rZW5FbmRwb2ludE9wdGlvbnNcclxufSBmcm9tICcuL2dsb2JhbCc7XHJcblxyXG5pbXBvcnQge1xyXG4gIERFRkFVTFRfQVVUSE9SSVpFX1RJTUVPVVRfSU5fU0VDT05EUyxcclxuICBERUZBVUxUX1NJTEVOVF9UT0tFTl9SRVRSWV9DT1VOVCxcclxuICBERUZBVUxUX0ZFVENIX1RJTUVPVVRfTVMsXHJcbiAgQ0xFQU5VUF9JRlJBTUVfVElNRU9VVF9JTl9TRUNPTkRTXHJcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuY29uc3QgVElNRU9VVF9FUlJPUiA9IHsgZXJyb3I6ICd0aW1lb3V0JywgZXJyb3JfZGVzY3JpcHRpb246ICdUaW1lb3V0JyB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFib3J0Q29udHJvbGxlciA9ICgpID0+IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZVF1ZXJ5UmVzdWx0ID0gKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICBpZiAocXVlcnlTdHJpbmcuaW5kZXhPZignIycpID4gLTEpIHtcclxuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuc3Vic3RyKDAsIHF1ZXJ5U3RyaW5nLmluZGV4T2YoJyMnKSk7XHJcbiAgfVxyXG5cclxuICBsZXQgcXVlcnlQYXJhbXMgPSBxdWVyeVN0cmluZy5zcGxpdCgnJicpO1xyXG5cclxuICBsZXQgcGFyc2VkUXVlcnk6IGFueSA9IHt9O1xyXG4gIHF1ZXJ5UGFyYW1zLmZvckVhY2gocXAgPT4ge1xyXG4gICAgbGV0IFtrZXksIHZhbF0gPSBxcC5zcGxpdCgnPScpO1xyXG4gICAgcGFyc2VkUXVlcnlba2V5XSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xyXG4gIH0pO1xyXG5cclxuICBpZiAocGFyc2VkUXVlcnkuZXhwaXJlc19pbikge1xyXG4gICAgcGFyc2VkUXVlcnkuZXhwaXJlc19pbiA9IHBhcnNlSW50KHBhcnNlZFF1ZXJ5LmV4cGlyZXNfaW4pO1xyXG4gIH1cclxuICByZXR1cm4gPGFueT5wYXJzZWRRdWVyeTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBydW5JZnJhbWUgPSAoXHJcbiAgYXV0aG9yaXplVXJsOiBzdHJpbmcsXHJcbiAgZXZlbnRPcmlnaW46IHN0cmluZyxcclxuICB0aW1lb3V0SW5TZWNvbmRzOiBudW1iZXIgPSBERUZBVUxUX0FVVEhPUklaRV9USU1FT1VUX0lOX1NFQ09ORFNcclxuKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PigocmVzLCByZWopID0+IHtcclxuICAgIHZhciBpZnJhbWUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcwJyk7XHJcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMCcpO1xyXG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgY29uc3QgcmVtb3ZlSWZyYW1lID0gKCkgPT4ge1xyXG4gICAgICBpZiAod2luZG93LmRvY3VtZW50LmJvZHkuY29udGFpbnMoaWZyYW1lKSkge1xyXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGltZW91dFNldFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICByZWooVElNRU9VVF9FUlJPUik7XHJcbiAgICAgIHJlbW92ZUlmcmFtZSgpO1xyXG4gICAgfSwgdGltZW91dEluU2Vjb25kcyAqIDEwMDApO1xyXG5cclxuICAgIGNvbnN0IGlmcmFtZUV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChlOiBNZXNzYWdlRXZlbnQpIHtcclxuICAgICAgaWYgKGUub3JpZ2luICE9IGV2ZW50T3JpZ2luKSByZXR1cm47XHJcbiAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAnYXV0aG9yaXphdGlvbl9yZXNwb25zZScpIHJldHVybjtcclxuICAgICAgY29uc3QgZXZlbnRTb3VyY2UgPSBlLnNvdXJjZTtcclxuICAgICAgaWYgKGV2ZW50U291cmNlKSB7XHJcbiAgICAgICAgKDxhbnk+ZXZlbnRTb3VyY2UpLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZS5kYXRhLnJlc3BvbnNlLmVycm9yID8gcmVqKGUuZGF0YS5yZXNwb25zZSkgOiByZXMoZS5kYXRhLnJlc3BvbnNlKTtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRTZXRUaW1lb3V0SWQpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGlmcmFtZUV2ZW50SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAvLyBEZWxheSB0aGUgcmVtb3ZhbCBvZiB0aGUgaWZyYW1lIHRvIHByZXZlbnQgaGFuZ2luZyBsb2FkaW5nIHN0YXR1c1xyXG4gICAgICAvLyBpbiBDaHJvbWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hdXRoMC9hdXRoMC1zcGEtanMvaXNzdWVzLzI0MFxyXG4gICAgICBzZXRUaW1lb3V0KHJlbW92ZUlmcmFtZSwgQ0xFQU5VUF9JRlJBTUVfVElNRU9VVF9JTl9TRUNPTkRTICogMTAwMCk7XHJcbiAgICB9O1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBpZnJhbWVFdmVudEhhbmRsZXIsIGZhbHNlKTtcclxuICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XHJcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBhdXRob3JpemVVcmwpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3Qgb3BlblBvcHVwID0gdXJsID0+IHtcclxuICBjb25zdCB3aWR0aCA9IDQwMDtcclxuICBjb25zdCBoZWlnaHQgPSA2MDA7XHJcbiAgY29uc3QgbGVmdCA9IHdpbmRvdy5zY3JlZW5YICsgKHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGgpIC8gMjtcclxuICBjb25zdCB0b3AgPSB3aW5kb3cuc2NyZWVuWSArICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBoZWlnaHQpIC8gMjtcclxuXHJcbiAgcmV0dXJuIHdpbmRvdy5vcGVuKFxyXG4gICAgdXJsLFxyXG4gICAgJ2F1dGgwOmF1dGhvcml6ZTpwb3B1cCcsXHJcbiAgICBgbGVmdD0ke2xlZnR9LHRvcD0ke3RvcH0sd2lkdGg9JHt3aWR0aH0saGVpZ2h0PSR7aGVpZ2h0fSxyZXNpemFibGUsc2Nyb2xsYmFycz15ZXMsc3RhdHVzPTFgXHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBydW5Qb3B1cCA9IChhdXRob3JpemVVcmw6IHN0cmluZywgY29uZmlnOiBQb3B1cENvbmZpZ09wdGlvbnMpID0+IHtcclxuICBsZXQgcG9wdXAgPSBjb25maWcucG9wdXA7XHJcblxyXG4gIGlmIChwb3B1cCkge1xyXG4gICAgcG9wdXAubG9jYXRpb24uaHJlZiA9IGF1dGhvcml6ZVVybDtcclxuICB9IGVsc2Uge1xyXG4gICAgcG9wdXAgPSBvcGVuUG9wdXAoYXV0aG9yaXplVXJsKTtcclxuICB9XHJcblxyXG4gIGlmICghcG9wdXApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IG9wZW4gcG9wdXAnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHJlamVjdCh7IC4uLlRJTUVPVVRfRVJST1IsIHBvcHVwIH0pO1xyXG4gICAgfSwgKGNvbmZpZy50aW1lb3V0SW5TZWNvbmRzIHx8IERFRkFVTFRfQVVUSE9SSVpFX1RJTUVPVVRfSU5fU0VDT05EUykgKiAxMDAwKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PiB7XHJcbiAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAnYXV0aG9yaXphdGlvbl9yZXNwb25zZScpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGlmIChlLmRhdGEucmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVqZWN0KGUuZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzb2x2ZShlLmRhdGEucmVzcG9uc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUmFuZG9tU3RyaW5nID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNoYXJzZXQgPVxyXG4gICAgJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV9+Lic7XHJcbiAgbGV0IHJhbmRvbSA9ICcnO1xyXG4gIGNvbnN0IHJhbmRvbVZhbHVlcyA9IEFycmF5LmZyb20oXHJcbiAgICBnZXRDcnlwdG8oKS5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoNDMpKVxyXG4gICk7XHJcbiAgcmFuZG9tVmFsdWVzLmZvckVhY2godiA9PiAocmFuZG9tICs9IGNoYXJzZXRbdiAlIGNoYXJzZXQubGVuZ3RoXSkpO1xyXG4gIHJldHVybiByYW5kb207XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZW5jb2RlID0gKHZhbHVlOiBzdHJpbmcpID0+IGJ0b2EodmFsdWUpO1xyXG5leHBvcnQgY29uc3QgZGVjb2RlID0gKHZhbHVlOiBzdHJpbmcpID0+IGF0b2IodmFsdWUpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVF1ZXJ5UGFyYW1zID0gKHBhcmFtczogYW55KSA9PiB7XHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcylcclxuICAgIC5maWx0ZXIoayA9PiB0eXBlb2YgcGFyYW1zW2tdICE9PSAndW5kZWZpbmVkJylcclxuICAgIC5tYXAoayA9PiBlbmNvZGVVUklDb21wb25lbnQoaykgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tdKSlcclxuICAgIC5qb2luKCcmJyk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2hhMjU2ID0gYXN5bmMgKHM6IHN0cmluZykgPT4ge1xyXG4gIGNvbnN0IGRpZ2VzdE9wID0gZ2V0Q3J5cHRvU3VidGxlKCkuZGlnZXN0KFxyXG4gICAgeyBuYW1lOiAnU0hBLTI1NicgfSxcclxuICAgIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKVxyXG4gICk7XHJcblxyXG4gIC8vIG1zQ3J5cHRvIChJRTExKSB1c2VzIHRoZSBvbGQgc3BlYywgd2hpY2ggaXMgbm90IFByb21pc2UgYmFzZWRcclxuICAvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9leHByZXNzaW9uL2RuOTA0NjQwKHY9dnMuNzEpXHJcbiAgLy8gSW5zdGVhZCBvZiByZXR1cm5pbmcgYSBwcm9taXNlLCBpdCByZXR1cm5zIGEgQ3J5cHRvT3BlcmF0aW9uXHJcbiAgLy8gd2l0aCBhIHJlc3VsdCBwcm9wZXJ0eSBpbiBpdC5cclxuICAvLyBBcyBhIHJlc3VsdCwgdGhlIHZhcmlvdXMgZXZlbnRzIG5lZWQgdG8gYmUgaGFuZGxlZCBpbiB0aGUgZXZlbnQgdGhhdCB3ZSdyZVxyXG4gIC8vIHdvcmtpbmcgaW4gSUUxMSAoaGVuY2UgdGhlIG1zQ3J5cHRvIGNoZWNrKS4gVGhlc2UgZXZlbnRzIGp1c3QgY2FsbCByZXNvbHZlXHJcbiAgLy8gb3IgcmVqZWN0IGRlcGVuZGluZyBvbiB0aGVpciBpbnRlbnRpb24uXHJcbiAgaWYgKCg8YW55PndpbmRvdykubXNDcnlwdG8pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgZGlnZXN0T3Aub25jb21wbGV0ZSA9IGUgPT4ge1xyXG4gICAgICAgIHJlcyhlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZGlnZXN0T3Aub25lcnJvciA9IChlOiBFcnJvckV2ZW50KSA9PiB7XHJcbiAgICAgICAgcmVqKGUuZXJyb3IpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZGlnZXN0T3Aub25hYm9ydCA9ICgpID0+IHtcclxuICAgICAgICByZWooJ1RoZSBkaWdlc3Qgb3BlcmF0aW9uIHdhcyBhYm9ydGVkJyk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBhd2FpdCBkaWdlc3RPcDtcclxufTtcclxuXHJcbmNvbnN0IHVybEVuY29kZUI2NCA9IChpbnB1dDogc3RyaW5nKSA9PiB7XHJcbiAgY29uc3QgYjY0Q2hhcnMgPSB7ICcrJzogJy0nLCAnLyc6ICdfJywgJz0nOiAnJyB9O1xyXG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKC9bXFwrXFwvPV0vZywgKG06IHN0cmluZykgPT4gYjY0Q2hhcnNbbV0pO1xyXG59O1xyXG5cclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAxMDY0NzYvXHJcbmNvbnN0IGRlY29kZUI2NCA9IGlucHV0ID0+XHJcbiAgZGVjb2RlVVJJQ29tcG9uZW50KFxyXG4gICAgYXRvYihpbnB1dClcclxuICAgICAgLnNwbGl0KCcnKVxyXG4gICAgICAubWFwKGMgPT4ge1xyXG4gICAgICAgIHJldHVybiAnJScgKyAoJzAwJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcclxuICAgICAgfSlcclxuICAgICAgLmpvaW4oJycpXHJcbiAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cmxEZWNvZGVCNjQgPSAoaW5wdXQ6IHN0cmluZykgPT5cclxuICBkZWNvZGVCNjQoaW5wdXQucmVwbGFjZSgvXy9nLCAnLycpLnJlcGxhY2UoLy0vZywgJysnKSk7XHJcblxyXG5leHBvcnQgY29uc3QgYnVmZmVyVG9CYXNlNjRVcmxFbmNvZGVkID0gaW5wdXQgPT4ge1xyXG4gIGNvbnN0IGllMTFTYWZlSW5wdXQgPSBuZXcgVWludDhBcnJheShpbnB1dCk7XHJcbiAgcmV0dXJuIHVybEVuY29kZUI2NChcclxuICAgIHdpbmRvdy5idG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uQXJyYXkuZnJvbShpZTExU2FmZUlucHV0KSkpXHJcbiAgKTtcclxufTtcclxuXHJcbmNvbnN0IHNlbmRNZXNzYWdlID0gKG1lc3NhZ2UsIHRvKSA9PlxyXG4gIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgLy8gT25seSBmb3IgZmV0Y2ggZXJyb3JzLCBhcyB0aGVzZSBnZXQgcmV0cmllZFxyXG4gICAgICBpZiAoZXZlbnQuZGF0YS5lcnJvcikge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXZlbnQuZGF0YS5lcnJvcikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmUoZXZlbnQuZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0by5wb3N0TWVzc2FnZShtZXNzYWdlLCBbbWVzc2FnZUNoYW5uZWwucG9ydDJdKTtcclxuICB9KTtcclxuXHJcbmNvbnN0IHN3aXRjaEZldGNoID0gYXN5bmMgKHVybCwgb3B0cywgdGltZW91dCwgd29ya2VyKSA9PiB7XHJcbiAgaWYgKHdvcmtlcikge1xyXG4gICAgLy8gQWJvcnRTaWduYWwgaXMgbm90IHNlcmlhbGl6YWJsZSwgbmVlZCB0byBpbXBsZW1lbnQgaW4gdGhlIFdlYiBXb3JrZXJcclxuICAgIGRlbGV0ZSBvcHRzLnNpZ25hbDtcclxuICAgIHJldHVybiBzZW5kTWVzc2FnZSh7IHVybCwgdGltZW91dCwgLi4ub3B0cyB9LCB3b3JrZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgb3B0cyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvazogcmVzcG9uc2Uub2ssXHJcbiAgICAgIGpzb246IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBmZXRjaFdpdGhUaW1lb3V0ID0gKFxyXG4gIHVybCxcclxuICBvcHRpb25zLFxyXG4gIHdvcmtlcixcclxuICB0aW1lb3V0ID0gREVGQVVMVF9GRVRDSF9USU1FT1VUX01TXHJcbikgPT4ge1xyXG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBjcmVhdGVBYm9ydENvbnRyb2xsZXIoKTtcclxuICBjb25zdCBzaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcclxuXHJcbiAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xyXG4gICAgLi4ub3B0aW9ucyxcclxuICAgIHNpZ25hbFxyXG4gIH07XHJcblxyXG4gIC8vIFRoZSBwcm9taXNlIHdpbGwgcmVzb2x2ZSB3aXRoIG9uZSBvZiB0aGVzZSB0d28gcHJvbWlzZXMgKHRoZSBmZXRjaCBvciB0aGUgdGltZW91dCksIHdoaWNoZXZlciBjb21wbGV0ZXMgZmlyc3QuXHJcbiAgcmV0dXJuIFByb21pc2UucmFjZShbXHJcbiAgICBzd2l0Y2hGZXRjaCh1cmwsIGZldGNoT3B0aW9ucywgdGltZW91dCwgd29ya2VyKSxcclxuICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJUaW1lb3V0IHdoZW4gZXhlY3V0aW5nICdmZXRjaCdcIikpO1xyXG4gICAgICB9LCB0aW1lb3V0KTtcclxuICAgIH0pXHJcbiAgXSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0SlNPTiA9IGFzeW5jICh1cmwsIHRpbWVvdXQsIG9wdGlvbnMsIHdvcmtlcikgPT4ge1xyXG4gIGxldCBmZXRjaEVycm9yLCByZXNwb25zZTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBERUZBVUxUX1NJTEVOVF9UT0tFTl9SRVRSWV9DT1VOVDsgaSsrKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFRpbWVvdXQodXJsLCBvcHRpb25zLCB3b3JrZXIsIHRpbWVvdXQpO1xyXG4gICAgICBmZXRjaEVycm9yID0gbnVsbDtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIEZldGNoIG9ubHkgZmFpbHMgaW4gdGhlIGNhc2Ugb2YgYSBuZXR3b3JrIGlzc3VlLCBzbyBzaG91bGQgYmVcclxuICAgICAgLy8gcmV0cmllZCBoZXJlLiBGYWlsdXJlIHN0YXR1cyAoNHh4LCA1eHgsIGV0YykgcmV0dXJuIGEgcmVzb2x2ZWQgUHJvbWlzZVxyXG4gICAgICAvLyB3aXRoIHRoZSBmYWlsdXJlIGluIHRoZSBib2R5LlxyXG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmV0Y2hfQVBJXHJcbiAgICAgIGZldGNoRXJyb3IgPSBlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgIHRocm93IGZldGNoRXJyb3I7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7XHJcbiAgICBqc29uOiB7IGVycm9yLCBlcnJvcl9kZXNjcmlwdGlvbiwgLi4uc3VjY2VzcyB9LFxyXG4gICAgb2tcclxuICB9ID0gcmVzcG9uc2U7XHJcblxyXG4gIGlmICghb2spIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XHJcbiAgICAgIGVycm9yX2Rlc2NyaXB0aW9uIHx8IGBIVFRQIGVycm9yLiBVbmFibGUgdG8gZmV0Y2ggJHt1cmx9YDtcclxuICAgIGNvbnN0IGUgPSA8YW55Pm5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG5cclxuICAgIGUuZXJyb3IgPSBlcnJvciB8fCAncmVxdWVzdF9lcnJvcic7XHJcbiAgICBlLmVycm9yX2Rlc2NyaXB0aW9uID0gZXJyb3JNZXNzYWdlO1xyXG5cclxuICAgIHRocm93IGU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3VjY2VzcztcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBvYXV0aFRva2VuID0gYXN5bmMgKFxyXG4gIHtcclxuICAgIGJhc2VVcmwsXHJcbiAgICB0aW1lb3V0LFxyXG4gICAgdG9rZW5FbmRwb2ludCA9ICcvb2F1dGgvdG9rZW4nLFxyXG4gICAgLi4ub3B0aW9uc1xyXG4gIH06IFRva2VuRW5kcG9pbnRPcHRpb25zLFxyXG4gIHdvcmtlclxyXG4pID0+IHtcclxuICByZXR1cm4gZ2V0SlNPTihcclxuICAgIGAke2Jhc2VVcmx9JHt0b2tlbkVuZHBvaW50fWAsXHJcbiAgICB0aW1lb3V0LFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogY3JlYXRlUXVlcnlQYXJhbXMoe1xyXG4gICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcclxuICAgICAgICAuLi5vcHRpb25zXHJcbiAgICAgIH0pLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3b3JrZXJcclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENyeXB0byA9ICgpID0+IHtcclxuICAvL2llIDExLnggdXNlcyBtc0NyeXB0b1xyXG4gIHJldHVybiA8Q3J5cHRvPih3aW5kb3cuY3J5cHRvIHx8ICg8YW55PndpbmRvdykubXNDcnlwdG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENyeXB0b1N1YnRsZSA9ICgpID0+IHtcclxuICBjb25zdCBjcnlwdG8gPSBnZXRDcnlwdG8oKTtcclxuICAvL3NhZmFyaSAxMC54IHVzZXMgd2Via2l0U3VidGxlXHJcbiAgcmV0dXJuIGNyeXB0by5zdWJ0bGUgfHwgKDxhbnk+Y3J5cHRvKS53ZWJraXRTdWJ0bGU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVDcnlwdG8gPSAoKSA9PiB7XHJcbiAgaWYgKCFnZXRDcnlwdG8oKSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAnRm9yIHNlY3VyaXR5IHJlYXNvbnMsIGB3aW5kb3cuY3J5cHRvYCBpcyByZXF1aXJlZCB0byBydW4gYGF1dGgwLXNwYS1qc2AuJ1xyXG4gICAgKTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiBnZXRDcnlwdG9TdWJ0bGUoKSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgXHJcbiAgICAgIGF1dGgwLXNwYS1qcyBtdXN0IHJ1biBvbiBhIHNlY3VyZSBvcmlnaW4uXHJcbiAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXV0aDAvYXV0aDAtc3BhLWpzL2Jsb2IvbWFzdGVyL0ZBUS5tZCN3aHktZG8taS1nZXQtYXV0aDAtc3BhLWpzLW11c3QtcnVuLW9uLWEtc2VjdXJlLW9yaWdpbiBcclxuICAgICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uXHJcbiAgICBgKTtcclxuICB9XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJ0aHJvdyIsInJldHVybiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwicG9wIiwicHVzaCIsInJlZnJlc2hUb2tlbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfYSIsIl9iIiwidXJsIiwidGltZW91dCIsIm9wdHMiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJwb3J0IiwicXVlcnlTdHJpbmciLCJzdWJzdHIiLCJxdWVyeVBhcmFtcyIsInNwbGl0IiwicGFyc2VkUXVlcnkiLCJmb3JFYWNoIiwicXAiLCJrZXkiLCJ2YWwiLCJkZWNvZGVVUklDb21wb25lbnQiLCJleHBpcmVzX2luIiwicGFyc2VJbnQiLCJwYXJzZVF1ZXJ5UmVzdWx0IiwicmVmcmVzaF90b2tlbiIsImdyYW50X3R5cGUiLCJFcnJvciIsInBhcmFtcyIsImtleXMiLCJmaWx0ZXIiLCJrIiwibWFwIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImFib3J0Q29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInNpZ25hbCIsInJlc3BvbnNlIiwicmFjZSIsInRpbWUiLCJzZXRUaW1lb3V0IiwiZmV0Y2giLCJfYyIsInBvc3RNZXNzYWdlIiwiZXJyb3IiLCJlcnJvcl8xIiwibWVzc2FnZSIsImpzb24iLCJhYm9ydCIsIm9rIiwiZXJyb3JfZGVzY3JpcHRpb24iLCJlcnJvcl8yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQTZCTyxJQUFJQSxFQUFXLFdBUWxCLE9BUEFBLEVBQVdDLE9BQU9DLFFBQVUsU0FBa0JDLEdBQzFDLElBQUssSUFBSUMsRUFBR0MsRUFBSSxFQUFHQyxFQUFJQyxVQUFVQyxPQUFRSCxFQUFJQyxFQUFHRCxJQUU1QyxJQUFLLElBQUlJLEtBRFRMLEVBQUlHLFVBQVVGLEdBQ09KLE9BQU9TLFVBQVVDLGVBQWVDLEtBQUtSLEVBQUdLLEtBQUlOLEVBQUVNLEdBQUtMLEVBQUVLLElBRTlFLE9BQU9OLElBRUtVLE1BQU1DLEtBQU1QLFlBOEJ6QixTQUFTUSxFQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUU5QyxPQUFPLElBQUtELElBQU1BLEVBQUlFLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVUMsR0FBUyxJQUFNQyxFQUFLTixFQUFVTyxLQUFLRixJQUFXLE1BQU9HLEdBQUtMLEVBQU9LLElBQ3BGLFNBQVNDLEVBQVNKLEdBQVMsSUFBTUMsRUFBS04sRUFBaUIsTUFBRUssSUFBVyxNQUFPRyxHQUFLTCxFQUFPSyxJQUN2RixTQUFTRixFQUFLSSxHQUpsQixJQUFlTCxFQUlhSyxFQUFPQyxLQUFPVCxFQUFRUSxFQUFPTCxRQUoxQ0EsRUFJeURLLEVBQU9MLE1BSmhEQSxhQUFpQk4sRUFBSU0sRUFBUSxJQUFJTixHQUFFLFNBQVVHLEdBQVdBLEVBQVFHLE9BSVRPLEtBQUtSLEVBQVdLLEdBQ2xHSCxHQUFNTixFQUFZQSxFQUFVTixNQUFNRyxFQUFTQyxHQUFjLEtBQUtTLFdBSS9ELFNBQVNNLEVBQVloQixFQUFTaUIsR0FDakMsSUFBc0dDLEVBQUdDLEVBQUdoQyxFQUFHaUMsRUFBM0dDLEVBQUksQ0FBRUMsTUFBTyxFQUFHQyxLQUFNLFdBQWEsR0FBVyxFQUFQcEMsRUFBRSxHQUFRLE1BQU1BLEVBQUUsR0FBSSxPQUFPQSxFQUFFLElBQU9xQyxLQUFNLEdBQUlDLElBQUssSUFDaEcsT0FBT0wsRUFBSSxDQUFFVixLQUFNZ0IsRUFBSyxHQUFJQyxNQUFTRCxFQUFLLEdBQUlFLE9BQVVGLEVBQUssSUFBd0IsbUJBQVhHLFNBQTBCVCxFQUFFUyxPQUFPQyxVQUFZLFdBQWEsT0FBT2hDLE9BQVVzQixFQUN2SixTQUFTTSxFQUFLcEMsR0FBSyxPQUFPLFNBQVV5QyxHQUFLLE9BQ3pDLFNBQWNDLEdBQ1YsR0FBSWQsRUFBRyxNQUFNLElBQUllLFVBQVUsbUNBQzNCLEtBQU9aLEdBQUcsSUFDTixHQUFJSCxFQUFJLEVBQUdDLElBQU1oQyxFQUFZLEVBQVI2QyxFQUFHLEdBQVNiLEVBQVUsT0FBSWEsRUFBRyxHQUFLYixFQUFTLFNBQU9oQyxFQUFJZ0MsRUFBVSxTQUFNaEMsRUFBRVMsS0FBS3VCLEdBQUksR0FBS0EsRUFBRVQsU0FBV3ZCLEVBQUlBLEVBQUVTLEtBQUt1QixFQUFHYSxFQUFHLEtBQUtsQixLQUFNLE9BQU8zQixFQUUzSixPQURJZ0MsRUFBSSxFQUFHaEMsSUFBRzZDLEVBQUssQ0FBUyxFQUFSQSxFQUFHLEdBQVE3QyxFQUFFcUIsUUFDekJ3QixFQUFHLElBQ1AsS0FBSyxFQUFHLEtBQUssRUFBRzdDLEVBQUk2QyxFQUFJLE1BQ3hCLEtBQUssRUFBYyxPQUFYWCxFQUFFQyxRQUFnQixDQUFFZCxNQUFPd0IsRUFBRyxHQUFJbEIsTUFBTSxHQUNoRCxLQUFLLEVBQUdPLEVBQUVDLFFBQVNILEVBQUlhLEVBQUcsR0FBSUEsRUFBSyxDQUFDLEdBQUksU0FDeEMsS0FBSyxFQUFHQSxFQUFLWCxFQUFFSSxJQUFJUyxNQUFPYixFQUFFRyxLQUFLVSxNQUFPLFNBQ3hDLFFBQ0ksS0FBTS9DLEVBQUlrQyxFQUFFRyxNQUFNckMsRUFBSUEsRUFBRUssT0FBUyxHQUFLTCxFQUFFQSxFQUFFSyxPQUFTLEtBQWtCLElBQVZ3QyxFQUFHLElBQXNCLElBQVZBLEVBQUcsSUFBVyxDQUFFWCxFQUFJLEVBQUcsU0FDakcsR0FBYyxJQUFWVyxFQUFHLE1BQWM3QyxHQUFNNkMsRUFBRyxHQUFLN0MsRUFBRSxJQUFNNkMsRUFBRyxHQUFLN0MsRUFBRSxJQUFNLENBQUVrQyxFQUFFQyxNQUFRVSxFQUFHLEdBQUksTUFDOUUsR0FBYyxJQUFWQSxFQUFHLElBQVlYLEVBQUVDLE1BQVFuQyxFQUFFLEdBQUksQ0FBRWtDLEVBQUVDLE1BQVFuQyxFQUFFLEdBQUlBLEVBQUk2QyxFQUFJLE1BQzdELEdBQUk3QyxHQUFLa0MsRUFBRUMsTUFBUW5DLEVBQUUsR0FBSSxDQUFFa0MsRUFBRUMsTUFBUW5DLEVBQUUsR0FBSWtDLEVBQUVJLElBQUlVLEtBQUtILEdBQUssTUFDdkQ3QyxFQUFFLElBQUlrQyxFQUFFSSxJQUFJUyxNQUNoQmIsRUFBRUcsS0FBS1UsTUFBTyxTQUV0QkYsRUFBS2YsRUFBS3JCLEtBQUtJLEVBQVNxQixHQUMxQixNQUFPVixHQUFLcUIsRUFBSyxDQUFDLEVBQUdyQixHQUFJUSxFQUFJLFVBQWVELEVBQUkvQixFQUFJLEVBQ3RELEdBQVksRUFBUjZDLEVBQUcsR0FBUSxNQUFNQSxFQUFHLEdBQUksTUFBTyxDQUFFeEIsTUFBT3dCLEVBQUcsR0FBS0EsRUFBRyxRQUFLLEVBQVFsQixNQUFNLEdBckI5QkwsQ0FBSyxDQUFDbkIsRUFBR3lDLE1DakR0RCxJQ3pCSEssRUE0RUZDLGlCQUFpQixXQWxFSSxTQUFPQywrSEFDNUJDLFNBQVFDLFFBQUtDLFlBQVlDLEVGdUJwQixTQUFnQnRELEVBQUd1QixHQUN0QixJQUFJeEIsRUFBSSxHQUNSLElBQUssSUFBSU0sS0FBS0wsRUFBT0gsT0FBT1MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBR0ssSUFBTWtCLEVBQUVnQyxRQUFRbEQsR0FBSyxJQUM5RU4sRUFBRU0sR0FBS0wsRUFBRUssSUFDYixHQUFTLE1BQUxMLEdBQXFELG1CQUFqQ0gsT0FBTzJELHNCQUN0QixDQUFBLElBQUl2RCxFQUFJLEVBQWIsSUFBZ0JJLEVBQUlSLE9BQU8yRCxzQkFBc0J4RCxHQUFJQyxFQUFJSSxFQUFFRCxPQUFRSCxJQUMzRHNCLEVBQUVnQyxRQUFRbEQsRUFBRUosSUFBTSxHQUFLSixPQUFPUyxVQUFVbUQscUJBQXFCakQsS0FBS1IsRUFBR0ssRUFBRUosTUFDdkVGLEVBQUVNLEVBQUVKLElBQU1ELEVBQUVLLEVBQUVKLEtBRTFCLE9BQU9GLEtFaENILG1CQUNFMkQsOEJBS04sMkJBRE03QixFQ0hzQixTQUFDOEIsR0FDM0JBLEVBQVlKLFFBQVEsTUFBUSxJQUM5QkksRUFBY0EsRUFBWUMsT0FBTyxFQUFHRCxFQUFZSixRQUFRLE9BRzFELElBQUlNLEVBQWNGLEVBQVlHLE1BQU0sS0FFaENDLEVBQW1CLEdBU3ZCLE9BUkFGLEVBQVlHLFNBQVEsU0FBQUMsR0FDZCxJQUFBZixFQUFhZSxFQUFHSCxNQUFNLEtBQXJCSSxPQUFLQyxPQUNWSixFQUFZRyxHQUFPRSxtQkFBbUJELE1BR3BDSixFQUFZTSxhQUNkTixFQUFZTSxXQUFhQyxTQUFTUCxFQUFZTSxhQUVwQ04sRURiR1EsQ0FBaUJqQixFQUFLekIsT0FDekIyQyxlQUFxQyxrQkFBcEIzQyxFQUFLNEMsV0FBZ0MsQ0FDOUQsSUFBS3pCLEVBQ0gsTUFBTSxJQUFJMEIsTURPaEIsK0NDTElwQixFQUFLekIsTUMrR3VCOEMsU0QvR085QyxJQUFNMkMsY0FBZXhCLElDZ0hyRG5ELE9BQU8rRSxLQUFLRCxHQUNoQkUsUUFBTyxTQUFBQyxHQUFLLFlBQXFCLElBQWRILEVBQU9HLE1BQzFCQyxLQUFJLFNBQUFELEdBQUssT0FBQUUsbUJBQW1CRixHQUFLLElBQU1FLG1CQUFtQkwsRUFBT0csT0FDakVHLEtBQUssTURoSEFDLEVBQWtCLElBQUlDLGdCQUNwQkMsRUFBV0YsU0FFZkcsMEJBRVMsZ0NBQU1yRSxRQUFRc0UsS0FBSyxFQXhCbEJDLEVBeUJMbEMsRUF6QmEsSUFBSXJDLFNBQVEsU0FBQUMsR0FBVyxPQUFBdUUsV0FBV3ZFLEVBQVNzRSxPQTBCN0RFLE1BQU1yQyxTQUFVRSxJQUFNOEIsNkJBRnhCQyxFQUFXSyxzQkFTWCxrQkFIQWhDLEVBQUtpQyxZQUFZLENBQ2ZDLE1BQU9DLEVBQU1DLHFCQUtqQixPQUFLVCxLQU1RQSxFQUFTVSxTQUpwQmIsRUFBZ0JjLDJCQUlsQkQsRUFBT0wsVUFFRWxCLGVBQ1B4QixFQUFlK0MsRUFBS3ZCLHFCQUNidUIsRUFBS3ZCLGVBRVp4QixFQUFlLEtBR2pCVSxFQUFLaUMsWUFBWSxDQUNmTSxHQUFJWixFQUFTWSxHQUNiRix3Q0FHRnJDLEVBQUtpQyxZQUFZLENBQ2ZNLElBQUksRUFDSkYsS0FBTSxDQUNKRyxrQkFBbUJDLEVBQU1MLGtDQTNEZixJQUFBUCxFQytIZ0JaIn0=",nc=!1,function(t){return ic=ic||$i(tc,ec,nc),new Worker(ic,t)}),oc=new pi,rc={memory:function(){return(new Li).enclosedCache},localstorage:function(){return new Wi}},lc=function(t){return rc[t]},uc=function(){function t(t){var e,n,i,c,o,r,l,u,s,a;if(this.options=t,"undefined"!=typeof window&&function(){if(!vi())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===Ai())throw new Error("\n      auth0-spa-js must run on a secure origin.\n      See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin \n      for more information.\n    ")}(),this.cacheLocation=t.cacheLocation||"memory",!lc(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');this.cache=lc(this.cacheLocation)(),this.scope=this.options.scope,this.tokenEndpoint=null!==(n=null===(e=this.options.oidcConfig)||void 0===e?void 0:e.tokenEndpoint)&&void 0!==n?n:"/oauth/token",this.endSessionEndpoint=null!==(c=null===(i=this.options.oidcConfig)||void 0===i?void 0:i.endSessionEndpoint)&&void 0!==c?c:"/v2/logout",this.authorizeEndpoint=null!==(r=null===(o=this.options.oidcConfig)||void 0===o?void 0:o.authorizeEndpoint)&&void 0!==r?r:"/authorize",this.transactionManager=new Pi,this.domainUrl="https://"+this.options.domain,this.tokenIssuer=null!==(u=null===(l=this.options.oidcConfig)||void 0===l?void 0:l.issuer)&&void 0!==u?u:this.domainUrl+"/",this.defaultScope=Qi("openid",void 0!==(null===(a=null===(s=this.options)||void 0===s?void 0:s.advancedOptions)||void 0===a?void 0:a.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=Qi(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new cc)}return t.prototype._url=function(t){var e=encodeURIComponent(btoa(JSON.stringify({name:"auth0-spa-js",version:"1.8.2"})));return""+this.domainUrl+t+"&auth0Client="+e},t.prototype._getParams=function(t,e,c,o,r){var l=this.options,u=(l.domain,l.leeway,l.useRefreshTokens,l.cacheLocation,l.advancedOptions,i(l,["domain","leeway","useRefreshTokens","cacheLocation","advancedOptions"]));return n(n(n({},u),t),{scope:Qi(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:e,nonce:c,redirect_uri:r||this.options.redirect_uri,code_challenge:o,code_challenge_method:"S256"})},t.prototype._authorizeUrl=function(t){return this._url(this.authorizeEndpoint+"?"+Vi(t))},t.prototype._verifyIdToken=function(t,e){return _i({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:e,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},t.prototype._parseNumber=function(t){return"string"!=typeof t?t:parseInt(t,10)||void 0},t.prototype.buildAuthorizeUrl=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var e,n,c,r,l,u,s,a,I,g,d;return o(this,(function(o){switch(o.label){case 0:return e=t.redirect_uri,n=t.appState,c=i(t,["redirect_uri","appState"]),r=Bi(Ci()),l=Bi(Ci()),u=Ci(),[4,Zi(u)];case 1:return s=o.sent(),a=Gi(s),I=t.fragment?"#"+t.fragment:"",g=this._getParams(c,r,l,a,e),d=this._authorizeUrl(g),this.transactionManager.create(r,{nonce:l,code_verifier:u,appState:n,scope:g.scope,audience:g.audience||"default",redirect_uri:g.redirect_uri}),[2,d+I]}}))}))},t.prototype.loginWithPopup=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),c(this,void 0,void 0,(function(){var c,r,l,u,s,a,I,g,d,b,y,p;return o(this,(function(o){switch(o.label){case 0:return c=i(t,[]),r=Bi(Ci()),l=Bi(Ci()),u=Ci(),[4,Zi(u)];case 1:return s=o.sent(),a=Gi(s),I=this._getParams(c,r,l,a,this.options.redirect_uri||window.location.origin),g=this._authorizeUrl(n(n({},I),{response_mode:"web_message"})),[4,fi(g,n(n({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(d=o.sent(),r!==d.state)throw new Error("Invalid state");return[4,Hi({baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:u,code:d.code,grant_type:"authorization_code",redirect_uri:I.redirect_uri,tokenEndpoint:this.tokenEndpoint},this.worker)];case 3:return b=o.sent(),y=this._verifyIdToken(b.id_token,l),p=n(n({},b),{decodedToken:y,scope:I.scope,audience:I.audience||"default",client_id:this.options.client_id}),this.cache.save(p),zi("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2]}}))}))},t.prototype.getUser=function(t){return void 0===t&&(t={audience:this.options.audience||"default",scope:this.scope||this.defaultScope}),c(this,void 0,void 0,(function(){var e;return o(this,(function(i){return t.scope=Qi(this.defaultScope,t.scope),[2,(e=this.cache.get(n({client_id:this.options.client_id},t)))&&e.decodedToken&&e.decodedToken.user]}))}))},t.prototype.getIdTokenClaims=function(t){return void 0===t&&(t={audience:this.options.audience||"default",scope:this.scope||this.defaultScope}),c(this,void 0,void 0,(function(){var e;return o(this,(function(i){return t.scope=Qi(this.defaultScope,this.scope,t.scope),[2,(e=this.cache.get(n({client_id:this.options.client_id},t)))&&e.decodedToken&&e.decodedToken.claims]}))}))},t.prototype.loginWithRedirect=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.buildAuthorizeUrl(t)];case 1:return e=n.sent(),window.location.assign(e),[2]}}))}))},t.prototype.handleRedirectCallback=function(t){return void 0===t&&(t=window.location.href),c(this,void 0,void 0,(function(){var e,i,c,r,l,u,s,a,I,g,d;return o(this,(function(o){switch(o.label){case 0:if(0===(e=t.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(i=function(t){t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#")));var e=t.split("&"),n={};return e.forEach((function(t){var e=t.split("="),i=e[0],c=e[1];n[i]=decodeURIComponent(c)})),n.expires_in&&(n.expires_in=parseInt(n.expires_in)),n}(e.join("")),c=i.state,r=i.code,l=i.error,u=i.error_description,!(s=this.transactionManager.get(c)))throw new Error("Invalid state");if(l)throw this.transactionManager.remove(c),new qi(l,u,c,s.appState);return this.transactionManager.remove(c),a={baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:s.code_verifier,grant_type:"authorization_code",code:r,tokenEndpoint:this.tokenEndpoint},void 0!==s.redirect_uri&&(a.redirect_uri=s.redirect_uri),[4,Hi(a,this.worker)];case 1:return I=o.sent(),g=this._verifyIdToken(I.id_token,s.nonce),d=n(n({},I),{decodedToken:g,audience:s.audience,scope:s.scope,client_id:this.options.client_id}),this.cache.save(d),zi("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2,{appState:s.appState}]}}))}))},t.prototype.getTokenSilently=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var e,c,r,l,u,s;return o(this,(function(o){switch(o.label){case 0:e=n(n({audience:this.options.audience,ignoreCache:!1},t),{scope:Qi(this.defaultScope,this.scope,t.scope)}),c=e.ignoreCache,r=i(e,["ignoreCache"]),o.label=1;case 1:return o.trys.push([1,7,8,10]),!c&&(l=this.cache.get({scope:r.scope,audience:r.audience||"default",client_id:this.options.client_id}))&&l.access_token?[2,l.access_token]:[4,oc.acquireLock("auth0.lock.getTokenSilently",5e3)];case 2:return o.sent(),!this.options.useRefreshTokens||t.audience?[3,4]:[4,this._getTokenUsingRefreshToken(r)];case 3:return s=o.sent(),[3,6];case 4:return[4,this._getTokenFromIFrame(r)];case 5:s=o.sent(),o.label=6;case 6:return u=s,this.cache.save(n({client_id:this.options.client_id},u)),zi("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2,u.access_token];case 7:throw o.sent();case 8:return[4,oc.releaseLock("auth0.lock.getTokenSilently")];case 9:return o.sent(),[7];case 10:return[2]}}))}))},t.prototype.getTokenWithPopup=function(t,e){return void 0===t&&(t={audience:this.options.audience,scope:this.scope||this.defaultScope}),void 0===e&&(e=hi),c(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return t.scope=Qi(this.defaultScope,this.scope,t.scope),[4,this.loginWithPopup(t,e)];case 1:return n.sent(),[2,this.cache.get({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}).access_token]}}))}))},t.prototype.isAuthenticated=function(){return c(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}}))}))},t.prototype.logout=function(t){void 0===t&&(t={}),null!==t.client_id?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var e=t.federated,n=t.localOnly,c=i(t,["federated","localOnly"]);if(n&&e)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");if(this.cache.clear(),Di("auth0.is.authenticated"),!n){var o=e?"&federated":"",r=this._url(this.endSessionEndpoint+"?"+Vi(c));window.location.assign(""+r+o)}},t.prototype._getTokenFromIFrame=function(t){return c(this,void 0,void 0,(function(){var e,c,r,l,u,s,a,I,g,d,b,y;return o(this,(function(o){switch(o.label){case 0:return e=Bi(Ci()),c=Bi(Ci()),r=Ci(),[4,Zi(r)];case 1:return l=o.sent(),u=Gi(l),s=this._getParams(t,e,c,u,t.redirect_uri||this.options.redirect_uri||window.location.origin),a=this._authorizeUrl(n(n({},s),{prompt:"none",response_mode:"web_message"})),I=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,[4,Xi(a,this.domainUrl,I)];case 2:if(g=o.sent(),e!==g.state)throw new Error("Invalid state");return t.scope,t.audience,t.redirect_uri,t.ignoreCache,t.timeoutInSeconds,d=i(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds"]),[4,Hi(n(n({},d),{baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:r,code:g.code,grant_type:"authorization_code",redirect_uri:s.redirect_uri,tokenEndpoint:this.tokenEndpoint}),this.worker)];case 3:return b=o.sent(),y=this._verifyIdToken(b.id_token,c),[2,n(n({},b),{decodedToken:y,scope:s.scope,audience:s.audience||"default"})]}}))}))},t.prototype._getTokenUsingRefreshToken=function(t){return c(this,void 0,void 0,(function(){var e,c,r,l,u,s;return o(this,(function(o){switch(o.label){case 0:return t.scope=Qi(this.defaultScope,this.options.scope,t.scope),(e=this.cache.get({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))&&e.refresh_token||this.worker?[3,2]:[4,this._getTokenFromIFrame(t)];case 1:return[2,o.sent()];case 2:c=t.redirect_uri||this.options.redirect_uri||window.location.origin,t.scope,t.audience,t.ignoreCache,t.timeoutInSeconds,l=i(t,["scope","audience","ignoreCache","timeoutInSeconds"]),o.label=3;case 3:return o.trys.push([3,5,,8]),[4,Hi(n(n({},l),{baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:c,tokenEndpoint:this.tokenEndpoint}),this.worker)];case 4:return r=o.sent(),[3,8];case 5:return"The web worker is missing the refresh token"!==(u=o.sent()).message?[3,7]:[4,this._getTokenFromIFrame(t)];case 6:return[2,o.sent()];case 7:throw u;case 8:return s=this._verifyIdToken(r.id_token),[2,n(n({},r),{decodedToken:s,scope:t.scope,audience:t.audience||"default"})]}}))}))},t}();export default function(t){return c(this,void 0,void 0,(function(){var e,i,c,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=new URL("https://"+t.domain),[4,Ui(e.origin+"/.well-known/openid-configuration",1e4,{},null)];case 1:return i=o.sent(),t.oidcConfig=n({issuer:i.issuer,tokenEndpoint:new URL(i.token_endpoint).pathname,endSessionEndpoint:new URL(i.end_session_endpoint).pathname,authorizeEndpoint:new URL(i.authorization_endpoint).pathname},t.oidcConfig),[3,3];case 2:return o.sent(),[3,3];case 3:if("memory"===(c=new uc(t)).cacheLocation&&!Ki("auth0.is.authenticated"))return[2,c];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,c.getTokenSilently()];case 5:return o.sent(),[3,7];case 6:if("login_required"!==(r=o.sent()).error)throw r;return[3,7];case 7:return[2,c]}}))}))}export{uc as Auth0Client};
//# sourceMappingURL=auth0-spa-js.production.esm.js.map
